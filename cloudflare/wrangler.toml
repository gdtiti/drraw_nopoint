name = "jimeng-api-proxy"
main = "worker.js"
compatibility_date = "2023-12-01"

# 帐户配置
account_id = "your-account-id-here"
zone_id = "your-zone-id-here"

# Worker配置
[vars]
# 环境变量
ENVIRONMENT = "production"
DEBUG = "false"

# KV存储（用于持久化数据）
[[kv_namespaces]]
binding = "CACHE"
id = "your-kv-namespace-id"
preview_id = "your-kv-preview-id"

# D1数据库（可选，用于更详细的日志存储）
[[d1_databases]]
binding = "DB"
database_name = "jimeng-api-logs"
database_id = "your-d1-database-id"

# 定时任务（健康检查）
[[triggers]]
crons = ["*/1 * * * *"]  # 每分钟执行一次

# 路由配置
[[routes]]
pattern = "your-domain.com/api/*"
zone_name = "your-domain.com"

[[routes]]
pattern = "api.your-domain.com/*"
zone_name = "your-domain.com"

# 自定义域名
[env.production]
name = "jimeng-api-proxy-prod"

[env.staging]
name = "jimeng-api-proxy-staging"

# 资源限制
[limits]
cpu_ms = 50000